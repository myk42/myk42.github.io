---
import type { GetStaticPathsOptions } from "astro";
import { getCollection } from "astro:content";
import { PAGINATE_PAGE_SIZE } from "astro:env/client";
import { getNewestPosts } from "../../scripts/sort.js";
import CollectionLayout from "../../layouts/CollectionLayout.astro";

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const posts = await getCollection("posts", ({ data }) => data.category === "projects");
  const latestPosts = getNewestPosts(posts);
  return paginate(latestPosts, { pageSize: PAGINATE_PAGE_SIZE });
}

const { page } = Astro.props;
---

<CollectionLayout page={page} title=`MYK PROJECTS - Page ${page.currentPage}` />
